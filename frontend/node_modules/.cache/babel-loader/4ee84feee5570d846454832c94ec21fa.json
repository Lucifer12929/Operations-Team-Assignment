{"ast":null,"code":"import _regeneratorRuntime from\"D:/Project/Operations Team/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Project/Operations Team/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/Project/Operations Team/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Project/Operations Team/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Project/Operations Team/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{Helmet}from\"react-helmet\";import\"./auth.css\";import axios from\"axios\";import Logo from\"./img/registe.svg\";import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import{showErrMsg,showSuccessMsg}from\"../utils/notification/Notification\";import{useDispatch}from\"react-redux\";import{isEmpty,isEmail,isMatch,isLength}from\"../utils/validation/Validation\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialState={name:\"\",email:\"\",phoneno:\"\",err:\"\",success:\"\"};var Register=function Register(){var history=useHistory();var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),formDataUser=_useState2[0],setFormDataUser=_useState2[1];var dispatch=useDispatch();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),dob=_useState4[0],setDob=_useState4[1];var name=formDataUser.name,email=formDataUser.email,phoneno=formDataUser.phoneno,err=formDataUser.err,success=formDataUser.success;var handleChange=function handleChange(e){var _objectSpread2;setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},(_objectSpread2={},_defineProperty(_objectSpread2,e.target.name,e.target.value),_defineProperty(_objectSpread2,\"err\",\"\"),_defineProperty(_objectSpread2,\"success\",\"\"),_objectSpread2)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var age,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!isEmpty(name)){_context.next=3;break;}return _context.abrupt(\"return\",setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},{err:\"Please fill in all fields\",success:\"\"})));case 3:if(isEmail(email)){_context.next=5;break;}return _context.abrupt(\"return\",setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},{err:\"Invalid email\",success:\"\"})));case 5:age=(new Date()-new Date(dob))/(1000*60*60*24*365);if(!(age<18)){_context.next=8;break;}return _context.abrupt(\"return\",setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},{err:\"Age must be greater than 18\",success:\"\"})));case 8:_context.prev=8;_context.next=11;return axios.post(\"/user/register\",{name:name,email:email,dob:dob,phoneno:phoneno});case 11:res=_context.sent;setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},{err:\"\",success:res.data.msg}));history.push('/activated');_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](8);_context.t0.response.data.msg&&setFormDataUser(_objectSpread(_objectSpread({},formDataUser),{},{err:_context.t0.response.data.msg,success:\"\"}));case 19:case\"end\":return _context.stop();}}},_callee,null,[[8,16]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var inputs=document.querySelectorAll(\".input\");function addcl(){var parent=this.parentNode.parentNode;parent.classList.add(\"focus\");}function remcl(){var parent=this.parentNode.parentNode;if(this.value===\"\"){parent.classList.remove(\"focus\");}}inputs.forEach(function(inputa){inputa.addEventListener(\"focus\",addcl);inputa.addEventListener(\"blur\",remcl);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Sign Up\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"forms-container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"signin-signup\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"#\",class:\"sign-in-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Sign up\"}),err&&showErrMsg(err),success&&showSuccessMsg(success),/*#__PURE__*/_jsxs(\"div\",{class:\"input-field\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-user\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:name,type:\"text\",className:\"input\",placeholder:\"Enter Your Name\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-field\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-envelope\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:email,type:\"text\",className:\"input\",placeholder:\"Enter Your Email\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-field\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-calendar\"}),/*#__PURE__*/_jsx(DatePicker,{id:\"dob\",selected:dob,onChange:function onChange(date){return setDob(date);},dateFormat:\"yyyy-MM-dd\",maxDate:new Date(),showYearDropdown:true,scrollableYearDropdown:true,yearDropdownItemNumber:100,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-field\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-mobile\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phoneno\",value:phoneno,type:\"text\",className:\"input\",placeholder:\"Enter Your Mobile\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Register\",class:\"btn solid\"})]})})})})]});};export default Register;","map":{"version":3,"names":["React","useState","useHistory","Link","Helmet","axios","DatePicker","showErrMsg","showSuccessMsg","useDispatch","isEmpty","isEmail","isMatch","isLength","useEffect","initialState","name","email","phoneno","err","success","Register","history","formDataUser","setFormDataUser","dispatch","dob","setDob","handleChange","e","target","value","handleSubmit","preventDefault","age","Date","post","res","data","msg","push","response","inputs","document","querySelectorAll","addcl","parent","parentNode","classList","add","remcl","remove","forEach","inputa","addEventListener","date"],"sources":["D:/Project/Operations Team/frontend/src/components/register.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport \"./auth.css\"\r\nimport axios from \"axios\";\r\nimport Logo from \"./img/registe.svg\";\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport {\r\n  showErrMsg,\r\n  showSuccessMsg,\r\n} from \"../utils/notification/Notification\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n  isEmpty,\r\n  isEmail,\r\n  isMatch,\r\n  isLength,\r\n} from \"../utils/validation/Validation\";\r\n\r\nimport { useEffect } from \"react\";\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  email: \"\",\r\n  phoneno: \"\",\r\n  err: \"\",\r\n  success: \"\",\r\n};\r\n\r\nconst Register = () => {\r\n  let history = useHistory();\r\n  const [formDataUser, setFormDataUser] = useState(initialState);\r\n  const dispatch = useDispatch();\r\n  const [dob, setDob] = useState(null);\r\n\r\n  const {\r\n    name,\r\n    email,\r\n    phoneno,\r\n    err,\r\n    success,\r\n  } = formDataUser;\r\n  const handleChange = (e) => {\r\n    \r\n    setFormDataUser({\r\n      ...formDataUser,\r\n      [e.target.name]: e.target.value,\r\n      err: \"\",\r\n      success: \"\",\r\n    });\r\n  };\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); \r\n    if (isEmpty(name))\r\n      return setFormDataUser({\r\n        ...formDataUser,\r\n        err: \"Please fill in all fields\",\r\n        success: \"\",\r\n      });\r\n\r\n    if (!isEmail(email))\r\n      return setFormDataUser({\r\n        ...formDataUser,\r\n        err: \"Invalid email\",\r\n        success: \"\",\r\n      });\r\n\r\n\r\n    const age = (new Date() - new Date(dob)) / (1000 * 60 * 60 * 24 * 365);\r\n    if (age < 18) \r\n      return setFormDataUser({\r\n        ...formDataUser,\r\n        err: \"Age must be greater than 18\",\r\n        success: \"\",\r\n      });\r\n    try {\r\n       \r\n        const res = await axios.post(\"/user/register\", {\r\n          name,\r\n          email,\r\n          dob,\r\n          phoneno\r\n        });\r\n        setFormDataUser({ ...formDataUser, err: \"\", success: res.data.msg });\r\n     history.push('/activated');\r\n      \r\n    } catch (err) {\r\n      err.response.data.msg &&\r\n        setFormDataUser({\r\n          ...formDataUser,\r\n          err: err.response.data.msg,\r\n          success: \"\",\r\n        });\r\n    }\r\n  };\r\n\r\n  const inputs = document.querySelectorAll(\".input\");\r\n\r\n  function addcl() {\r\n    let parent = this.parentNode.parentNode;\r\n    parent.classList.add(\"focus\");\r\n  }\r\n\r\n  function remcl() {\r\n    let parent = this.parentNode.parentNode;\r\n    if (this.value === \"\") {\r\n      parent.classList.remove(\"focus\");\r\n    }\r\n  }\r\n\r\n  inputs.forEach((inputa) => {\r\n    inputa.addEventListener(\"focus\", addcl);\r\n    inputa.addEventListener(\"blur\", remcl);\r\n  });\r\n\r\n  return (\r\n   <>\r\n      <Helmet>\r\n        <title>Sign Up</title>\r\n      </Helmet>\r\n      <div class=\"container\">\r\n      <div class=\"forms-container\">\r\n        <div class=\"signin-signup\">\r\n          <form action=\"#\" class=\"sign-in-form\" onSubmit={handleSubmit}>\r\n            <h2 className=\"title\">Sign up</h2>\r\n            {err && showErrMsg(err)}\r\n            {success && showSuccessMsg(success)}\r\n            <div class=\"input-field\">\r\n              <i class=\"fas fa-user\"></i>\r\n              <input  name=\"name\"\r\n                    value={name}\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    placeholder=\"Enter Your Name\"\r\n                    onChange={handleChange} />\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <i class=\"fas fa-envelope\"></i>\r\n              <input  \r\n                    name=\"email\"\r\n                    value={email}\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    placeholder=\"Enter Your Email\"\r\n                    onChange={handleChange} />\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <i class=\"fas fa-calendar\"></i>\r\n              <DatePicker\r\n                id=\"dob\"\r\n                selected={dob}\r\n                onChange={(date) => setDob(date)}\r\n                dateFormat=\"yyyy-MM-dd\"\r\n                maxDate={new Date()}\r\n                showYearDropdown\r\n                scrollableYearDropdown\r\n                yearDropdownItemNumber={100}\r\n                required\r\n              />\r\n            </div>\r\n            <div class=\"input-field\">\r\n              <i class=\"fas fa-mobile\"></i>\r\n              <input  \r\n                    name=\"phoneno\"\r\n                    value={phoneno}\r\n                    type=\"text\"\r\n                    className=\"input\"\r\n                    placeholder=\"Enter Your Mobile\"\r\n                    onChange={handleChange} />\r\n            </div>\r\n           \r\n            <input type=\"submit\" value=\"Register\" class=\"btn solid\" />\r\n            \r\n          </form>\r\n         \r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}